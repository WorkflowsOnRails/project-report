\chapter{Background}

A workflow can be seen as a series of operations that are run in a specific order. The main focus of a workflow is to guide the flow of control through each step in the correct order. Many problems that can be considered workflows are simplified when approached as a workflow by changing general requirements into smaller steps which can be easily understood. This makes approaching problems as workflows a good idea as it will generally lower complexity which in turn lowers the cost of the project.


\sectionnote{AC}
\section{Overview of Workflows}

A workflow can be seen as a series of operations that are run in a specific order. The main focus of a workflow is to guide the flow of control through each step in order. In order to advance to the next step in a workflow a number of predefined conditions must be met. Once the conditions are met the control is redirected to the new step. This continues until a ‘completed’ step is reached.

A workflow can have many branching paths where the control flow branches depending on what conditions are met. It can be argued that every problem can be approached as if it were a workflow, as long as there is a well defined start and end. For this reason workflow frameworks are widely used to aid in the creation of solutions.

An example of a basic workflow would be an industrial assembly line. Each step builds upon the previous step. The product is not passed onto the next step until it meets the conditions imposed by the next step. The assembly line only ever has one path that it follows (linear) and is therefore the simplest workflow apart from a single step workflow. More complicated workflows have many branches of control and can have many separate finishing steps. These more complicated workflows are implemented as state machines (state based) or flow charts (process based).

Workflow frameworks normally maintain the current step of the program and how the program will transition between steps. This allows what each step implements to be abstracted from how the program transitions between the many steps lowering the overall complexity of the system. This allows transitions to be modified and edited with little impact to the implementation of each individual step.

The state based model implements the workflow as a state machine. Each step is represented as a state and the following steps are represented by the state transitions. The state model acts like a state machine and is only ever in one state at any time. The state model is good at modeling workflows with well defined single states but falls apart when parallel states are required.

The process based model implements the workflow as a flow chart. This model differs from the state model in that it can easily model parallel processes. Where a state machine typically is only ever in a single state the process model can branch its flow of control to work in parallel. This is done by allowing all the transitions out of a node to be taken as long as the correct conditions are met. The process model also allows control flow to merge from two branches of control back into a single process.

Business Process Model and Notation (BPMN) is graphical way of modeling a business process and is very similar to UML. BPMN is structured as a set of activities linked together by messages and events. Activities are the processes and can be considered the things that need to be done. Events are things that happen in response to something else, such as delays, and connections which describe the control flow.


\sectionnote{BM}
\section {Evaluating Workflow Frameworks for Rails}

\todo{Introduce these questions}

\question{Does the framework work with Ruby on Rails 3.2 / 4.0?}

Ruby on Rails has changed over time. The documentation and community are focused on Rails 4; if a workflow framework only works with Rails 2, the benefit of using the framework might be outweighed by the difficulty of finding tools and best practices for an older version of Rails.

\question{How do we define roles using the framework?}

Workflows involve associating activities to be carried out to people or agents to carry them out. It’s important to understand how the workflow framework expects roles to be defined in order to understand how to use the framework at all.

\question{How can we assign activities to individual users?}

Some workflows call for individuals to be responsible for carrying out activities. A useful workflow framework should accommodate this requirement.

\question{How can we assign activities to groups of users?}

Other times, the specific individual that carries out a workflow is less important than the fact that the user has the appropriate skills and position in the company. In this case, it is easier to assign an activity to a class of users and let an appropriate user or group of users carry it out.

\question{How is access control handled for access to artifacts and activities?} 
While the notion of access control is common in applications, permissions are often a property of an object that a user attempts to access. In the case of workflow-based systems, permissions are not only a function of the user and object, but also the state of the workflow. As an example, in an expense reporting system claims should only be editable by the submitter before they are approved by their manager.

\question{How do we handle time-limited activities?}

Activities are often time-limited by business requirements. A workflow framework should have some way of modelling activity deadlines, and responding to overdue activities.

\question{Are we able to set preconditions for an activity to start?}

Many activities require some data or artifacts as input; for instance, carrying out object design requires that the requirements were captured in the requirements analysis phase. A workflow framework should have a way to make sure that the prerequisites for an activity are present before the activity begins. Otherwise, applications created with the framework may start activities prematurely due to user error.

\question{Can we set postconditions on activities, and reflect them in the user interface (ex. forms)?}

Similar to preconditions, activities often have post-conditions that must be met before the activity is completed. Even if an analyst indicates that the requirements analysis phase of a software project is completed, the activity may not be complete until the results have been verified.

\question{How do we model parallel activities in a workflow?}

In many real-world workflows, activities occur in parallel to reduce the time taken to complete the workflow. For example, verification testing and implementation are often overlapped in software development; it is possible to perform them in sequence, but would slow the process down. Workflow frameworks must be able to accommodate real business processes to be useful in practice.

\question{Can we change the state of a workflow through an alternate process if there are exceptional circumstances?}

Mistakes are made in any process involving humans. Though it’s not an essential functionality, it is useful to be able to rewind a workflow to an arbitrary activity if the activity needs to be corrected. Otherwise, users may need to recreate the work item and repeat the activity from the beginning.

\question{What work, if any, is needed to integrate the framework with Rails?}

In order to use a workflow framework with Ruby on Rails, it may be necessary to somehow integrate or install the framework into a Rails application. It’s important to understand the amount of effort required - a less-capable but easily integrated framework might be more cost-effective than a full-featured suite that has never been used with Rails before.
